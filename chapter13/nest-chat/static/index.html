<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nest Chat</title>
</head>
<body>
    <h2>Simple Nest Chat</h2>
    <div id="chat"></div>       <!-- 채팅 영역 -->

    <!-- 글 입력 영역 -->
    <input type="text" id="message" placeholder="메시지를 입력해주세요.">
    <button onclick="sendMessage()">전송</button>
</body>

<!-- socket.io 클라이언트 로드 -->
<script src="http://localhost:3000/socket.io/socket.io.js"></script>
<script>
    // socket.io 인스턴스생성
    const socket = io('http://localhost:3000');

    // console.log(socket);

    // 전송 버튼 클릭시 입력된 글을 message 로 보냄
    function sendMessage() {
      const message = document.querySelector('#message').value;

      socket.emit('message', message)
    }

    socket.on('connect', () => {
      console.log('chat server connect!');
    });

    socket.on('message', (message) => {
      const chatErea = document.querySelector('#chat');

      const divEle = document.createElement('div');
      const messageNode = document.createTextNode(message);

      divEle.append(messageNode);
      chatErea.appendChild(divEle);
    });


</script>

</html>